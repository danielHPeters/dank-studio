{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/enum/ESoundType.ts","webpack:///./src/studio/widgets/KeyPad.ts","webpack:///./src/studio/audio/Kick.ts","webpack:///./src/studio/audio/Sound.ts","webpack:///./src/studio/audio/Snare.ts","webpack:///./src/factory/SoundFactory.ts","webpack:///./src/studio/input/Keyboard.ts","webpack:///./src/studio/app.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","ESoundType","default","[object Object]","id","keyBoard","this","element","document","getElementById","keySoundMap","forEach","sound","key","addKey","frequency","toString","text","newKey","createElement","span","textNode","createTextNode","textNode2","lineBreak","appendChild","classList","add","setAttribute","addEventListener","event","setDownEvent","setUpEvent","context","compressor","delay","currentTime","oscillator","createOscillator","gain","createGain","connect","setValueAtTime","exponentialRampToValueAtTime","start","stop","loop","oscillatorType","type","linearRampToValueAtTime","noiseFrequency","noiseFilter","noiseGain","oscillatorGain","noise","createBufferSource","time","createBiquadFilter","buffer","createNoiseBuffer","bufferSize","sampleRate","createBuffer","output","getChannelData","Math","random","ESoundType_1","Snare_1","Sound_1","Kick_1","NOTE","SNARE","KICK","HITHAT","Error","SoundFactory_1","KeyboardStyles","AudioContext","masterGain","createDynamicsCompressor","soundFactory","Map","registeredInputs","destination","initCompressor","registerKeyHandler","error","console","log","set","create","undefined","ACTIVE","init","play","remove","threshold","knee","ratio","attack","release","window","Keyboard_1","KeyPad_1","keyPad","audioSlider","Number","max","min","step","body","registerKey","addAllKeys"],"mappings":"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","file":"studio.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","export enum ESoundType {\r\n  KICK, SNARE, HITHAT, NOTE\r\n}","/**\r\n * Keypad Widget class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nimport Keyboard from '../input/Keyboard'\r\n\r\nexport default class KeyPad {\r\n  private id: string\r\n  private element: HTMLElement\r\n  private keyBoard: Keyboard\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {string} id\r\n   * @param {Keyboard} keyBoard\r\n   */\r\n  constructor (id: string, keyBoard: Keyboard) {\r\n    this.id = id\r\n    this.element = document.getElementById(this.id)\r\n    this.keyBoard = keyBoard\r\n  }\r\n\r\n  /**\r\n   * Add all keys registered on the keyboard to the keypad.\r\n   */\r\n  addAllKeys (): void {\r\n    this.keyBoard.keySoundMap.forEach((sound, key) => this.addKey(key, sound.frequency.toString()))\r\n  }\r\n\r\n  /**\r\n   * Add a key element.\r\n   *\r\n   * @param {string} id\r\n   * @param {string} text\r\n   */\r\n  private addKey (id: string, text: string): void {\r\n    const newKey = document.createElement('li')\r\n    const span = document.createElement('span')\r\n    const textNode = document.createTextNode(id)\r\n    const textNode2 = document.createTextNode(text)\r\n    const lineBreak = document.createElement('br')\r\n    span.appendChild(textNode)\r\n    span.appendChild(lineBreak)\r\n    span.appendChild(textNode2)\r\n    span.classList.add('keyDescription')\r\n    newKey.appendChild(span)\r\n    newKey.classList.add('key')\r\n    newKey.setAttribute('id', id)\r\n    newKey.addEventListener('mouseenter', event => this.keyBoard.setDownEvent(id))\r\n    newKey.addEventListener('touchstart', event => this.keyBoard.setDownEvent(id))\r\n    newKey.addEventListener('mouseleave', event => this.keyBoard.setUpEvent(id))\r\n    newKey.addEventListener('touchend', event => this.keyBoard.setUpEvent(id))\r\n    this.element.appendChild(newKey)\r\n  }\r\n}\r\n","import ISound from '../../interfaces/ISound'\r\n\r\n/**\r\n * Drum 'Kick'.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Kick implements ISound {\r\n  context: AudioContext\r\n  compressor: DynamicsCompressorNode\r\n  oscillator: OscillatorNode\r\n  gain: GainNode\r\n  frequency: number\r\n  volume: number\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {AudioContext} context\r\n   * @param {number} frequency\r\n   */\r\n  constructor (context: AudioContext, compressor: DynamicsCompressorNode, frequency: number) {\r\n    this.context = context\r\n    this.compressor = compressor\r\n    this.frequency = frequency\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  init (): void {\r\n    const delay = this.context.currentTime\r\n    this.oscillator = this.context.createOscillator()\r\n    this.gain = this.context.createGain()\r\n    this.oscillator.connect(this.gain)\r\n    this.gain.connect(this.compressor)\r\n    const delTime = 0.5\r\n    const rampValue = 0.01\r\n\r\n    this.oscillator.frequency.setValueAtTime(this.frequency, delay)\r\n    this.gain.gain.setValueAtTime(1, delay)\r\n\r\n    this.oscillator.frequency.exponentialRampToValueAtTime(rampValue, delay + delTime)\r\n    this.gain.gain.exponentialRampToValueAtTime(rampValue, delay + delTime)\r\n\r\n    this.oscillator.start(delay)\r\n\r\n    this.oscillator.stop(delay + delTime)\r\n  }\r\n\r\n  play (loop: boolean = false, delay: number = 0): void {\r\n\r\n  }\r\n\r\n  stop (delay: number = 0): void {\r\n\r\n  }\r\n}\r\n","import ISound from '../../interfaces/ISound'\r\n\r\n/**\r\n * Sound class\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Sound implements ISound {\r\n  context: AudioContext\r\n  gain: GainNode\r\n  frequency: number\r\n  volume: number\r\n  oscillatorType: OscillatorType\r\n  private compressor: DynamicsCompressorNode\r\n  private oscillator: OscillatorNode\r\n\r\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param {AudioContext} context\r\n   * @param {DynamicsCompressorNode} compressor\r\n   * @param {number} frequency\r\n   * @param {OscillatorType} oscillatorType\r\n   */\r\n  constructor (context: AudioContext, compressor: DynamicsCompressorNode, frequency: number, oscillatorType: OscillatorType) {\r\n    this.context = context\r\n    this.compressor = compressor\r\n    this.frequency = frequency\r\n    this.oscillatorType = oscillatorType\r\n  }\r\n\r\n  /**\r\n   * Connect to audio output and play sound.\r\n   */\r\n  init (): void {\r\n    this.oscillator = this.context.createOscillator()\r\n    this.gain = this.context.createGain()\r\n    this.gain.connect(this.compressor)\r\n    this.oscillator.type = this.oscillatorType\r\n    this.oscillator.frequency.value = this.frequency\r\n    this.oscillator.connect(this.gain)\r\n    this.gain.gain.setValueAtTime(0, this.context.currentTime)\r\n    this.gain.gain.linearRampToValueAtTime(0.4, this.context.currentTime + 0.1)\r\n    this.oscillator.start(0.5)\r\n  }\r\n\r\n  play (loop: boolean = false, delay: number = 0): void {\r\n\r\n  }\r\n\r\n  /**\r\n   * Stop sound.\r\n   */\r\n  stop (delay: number = 0): void {\r\n    this.gain.gain.linearRampToValueAtTime(0, this.context.currentTime + 0.8)\r\n    this.oscillator.stop(this.context.currentTime + 2.8)\r\n  }\r\n}\r\n","import ISound from '../../interfaces/ISound'\r\n\r\n/**\r\n * Snare sound class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Snare implements ISound {\r\n  context: AudioContext\r\n  compressor: DynamicsCompressorNode\r\n  frequency: number\r\n  gain: GainNode\r\n  volume: number\r\n  private noise: AudioBufferSourceNode\r\n  private noiseFrequency: number\r\n  private noiseFilter: BiquadFilterType\r\n  private noiseGain: GainNode\r\n  private oscillatorType: OscillatorType\r\n  private oscillator: OscillatorNode\r\n  private oscillatorGain: GainNode\r\n  /**\r\n   *\r\n   * @param {AudioContext} context\r\n   * @param {number} frequency\r\n   * @param {number} noiseFrequency\r\n   * @param {string} noiseFilter\r\n   * @param {string} oscillatorType\r\n   */\r\n  constructor (context: AudioContext, compressor: DynamicsCompressorNode, frequency: number, noiseFrequency: number, noiseFilter: BiquadFilterType, oscillatorType: OscillatorType) {\r\n    this.context = context\r\n    this.compressor = compressor\r\n    this.frequency = frequency\r\n    this.noiseFrequency = noiseFrequency\r\n    this.noiseFilter = noiseFilter\r\n    this.oscillatorType = oscillatorType\r\n  }\r\n\r\n  init (): void {\r\n    this.noiseGain = this.context.createGain()\r\n    this.oscillatorGain = this.context.createGain()\r\n    this.gain = this.context.createGain()\r\n    this.noise = this.context.createBufferSource()\r\n    this.oscillator = this.context.createOscillator()\r\n    const time = this.context.currentTime\r\n    const noiseFilter = this.context.createBiquadFilter()\r\n    this.noise.buffer = this.createNoiseBuffer()\r\n    noiseFilter.type = this.noiseFilter\r\n    noiseFilter.frequency.value = this.noiseFrequency\r\n    this.noise.connect(noiseFilter)\r\n    noiseFilter.connect(this.noiseGain)\r\n    this.noiseGain.connect(this.gain)\r\n    this.oscillator.type = this.oscillatorType\r\n    this.oscillator.connect(this.oscillatorGain)\r\n    this.oscillatorGain.connect(this.gain)\r\n    this.gain.connect(this.compressor)\r\n\r\n    this.noiseGain.gain.setValueAtTime(1, time)\r\n    this.noiseGain.gain.exponentialRampToValueAtTime(0.01, time + 0.2)\r\n\r\n    this.noise.start(time)\r\n\r\n    this.oscillator.frequency.setValueAtTime(this.frequency, time)\r\n    this.gain.gain.setValueAtTime(0.7, time)\r\n    this.gain.gain.exponentialRampToValueAtTime(0.01, time + 0.1)\r\n\r\n    this.oscillator.start(time)\r\n\r\n    this.oscillator.stop(time + 0.2)\r\n    this.noise.stop(time + 0.2)\r\n  }\r\n\r\n  play (loop: boolean = false, delay: number = 0): void {\r\n\r\n  }\r\n\r\n  stop (delay: number = 0): void {\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {AudioBuffer}\r\n   */\r\n  private createNoiseBuffer (): AudioBuffer {\r\n    const bufferSize = this.context.sampleRate\r\n    const buffer = this.context.createBuffer(1, bufferSize, this.context.sampleRate)\r\n    const output = buffer.getChannelData(0)\r\n\r\n    for (let i = 0; i < bufferSize; i++) {\r\n      output[i] = Math.random() * 2 - 1\r\n    }\r\n\r\n    return buffer\r\n  }\r\n}\r\n","import { ESoundType } from '../enum/ESoundType'\r\nimport Snare from '../studio/audio/Snare'\r\nimport Sound from '../studio/audio/Sound'\r\nimport ISound from '../interfaces/ISound'\r\nimport Kick from '../studio/audio/Kick'\r\n\r\n/**\r\n * Factory for ISound object.\r\n * \r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class SoundFactory {\r\n  context: AudioContext\r\n  compressor: DynamicsCompressorNode\r\n\r\n  /**\r\n   * Constructor.\r\n   * \r\n   * @param {AudioContext} context Application audio context\r\n   * @param {DynamicsCompressorNode} compressor Compressor used to fix clipping\r\n   */\r\n  constructor (context: AudioContext, compressor: DynamicsCompressorNode) {\r\n    this.context = context\r\n    this.compressor = compressor\r\n  }\r\n  /**\r\n   * Create a sound object with the specified parameters.\r\n   *\r\n   * @param {number} frequency\r\n   * @param {ESoundType} type\r\n   * @param {OscillatorType} oscillatorType\r\n   */\r\n    create (frequency: number, type: ESoundType = ESoundType.NOTE, oscillatorType: OscillatorType = 'square'): ISound {\r\n      switch (type) {\r\n        case ESoundType.NOTE:\r\n          return new Sound(this.context, this.compressor, frequency, oscillatorType)\r\n        case ESoundType.SNARE:\r\n          return new Snare(this.context, this.compressor, frequency, 1000, 'highpass', 'triangle')\r\n        case ESoundType.KICK:\r\n          return new Kick(this.context, this.compressor, frequency)\r\n        case ESoundType.HITHAT:\r\n          throw new Error('Not Implemented!')\r\n      }\r\n  }\r\n}\r\n","import Sound from '../audio/Sound'\r\nimport ISound from '../../interfaces/ISound'\r\nimport Snare from '../audio/Snare'\r\nimport Kick from '../audio/Kick'\r\nimport { ESoundType } from '../../enum/ESoundType'\r\nimport AudioItem from '../widgets/AudioItem';\r\nimport SoundFactory from '../../factory/SoundFactory';\r\n\r\nexport enum KeyboardStyles {\r\n  ACTIVE = 'keyActive'\r\n}\r\n\r\n/**\r\n * Keyboard class.\r\n *\r\n * @author Daniel Peters\r\n * @version 1.0\r\n */\r\nexport default class Keyboard {\r\n  context: AudioContext\r\n  masterGain: GainNode\r\n  compressor: DynamicsCompressorNode\r\n  keySoundMap: Map<string, ISound>\r\n  registeredInputs: Map<string, boolean>\r\n  soundFactory: SoundFactory\r\n  /**\r\n   * Constructor.\r\n   */\r\n  constructor () {\r\n    try {\r\n      this.context = new AudioContext()\r\n      this.masterGain = this.context.createGain()\r\n      this.compressor = this.context.createDynamicsCompressor()\r\n      this.soundFactory = new SoundFactory(this.context, this.compressor)\r\n      this.keySoundMap = new Map<string, ISound>()\r\n      this.registeredInputs = new Map<string, boolean>()\r\n      this.masterGain.connect(this.context.destination)\r\n      this.initCompressor()\r\n      this.registerKeyHandler()\r\n    } catch (error) {\r\n      console.log('This browser does not support Web Audio API.', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register a keyboard key with a sound\r\n   *\r\n   * @param {string} key\r\n   * @param {number} frequency\r\n   * @param {ESoundType} type\r\n   * @param {OscillatorType} oscillatorType\r\n   */\r\n  registerKey (key: string, frequency: number, type: ESoundType = ESoundType.NOTE, oscillatorType: OscillatorType = 'square'): void {\r\n    this.keySoundMap.set(key, this.soundFactory.create(frequency, type, oscillatorType))\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} key\r\n   */\r\n  setDownEvent (key: string) {\r\n    if (!this.registeredInputs.get(key) && this.keySoundMap.get(key) !== undefined) {\r\n      document.getElementById(key).classList.add(KeyboardStyles.ACTIVE)\r\n      this.keySoundMap.get(key).init()\r\n      this.keySoundMap.get(key).play()\r\n      this.registeredInputs.set(key, true)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {string} key\r\n   */\r\n  setUpEvent (key: string): void {\r\n    if (this.registeredInputs.get(key) && this.keySoundMap.get(key) !== undefined) {\r\n      document.getElementById(key).classList.remove(KeyboardStyles.ACTIVE)\r\n      this.keySoundMap.get(key).stop()\r\n      this.registeredInputs.set(key, false)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize the compressor to fix audio clipping.\r\n   */\r\n  private initCompressor (): void {\r\n    this.compressor.threshold.value = -50\r\n    this.compressor.knee.value = 40\r\n    this.compressor.ratio.value = 12\r\n    this.compressor.attack.value = 0\r\n    this.compressor.release.value = 0.25\r\n    this.compressor.connect(this.masterGain)\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  private registerKeyHandler (): void {\r\n    window.addEventListener('keydown', event => this.setDownEvent(event.key))\r\n    window.addEventListener('keyup', event => this.setUpEvent(event.key))\r\n  }\r\n}\r\n","import KeyBoard from './input/Keyboard'\r\nimport KeyPad from './widgets/KeyPad'\r\nimport { ESoundType } from '../enum/ESoundType'\r\n\r\n/**\r\n * Init script. Set all keys here.\r\n * \r\n * @author Daniel Peters\r\n * @version 1.1\r\n */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const keyBoard = new KeyBoard()\r\n  const keyPad = new KeyPad('keyPad', keyBoard)\r\n  const audioSlider = document.createElement('input') as HTMLInputElement\r\n  audioSlider.type = 'range'\r\n  audioSlider.addEventListener('change', () => keyBoard.masterGain.gain.value = Number(audioSlider.value))\r\n  audioSlider.max = \"1\"\r\n  audioSlider.min = \"0\"\r\n  audioSlider.step = \"0.1\"\r\n  document.body.appendChild(audioSlider)\r\n\r\n  keyBoard.registerKey('a', 261.63)\r\n  keyBoard.registerKey('s', 293.66)\r\n  keyBoard.registerKey('d', 329.63)\r\n  keyBoard.registerKey('f', 349.23)\r\n  keyBoard.registerKey('g', 392.00)\r\n  keyBoard.registerKey('h', 440)\r\n  keyBoard.registerKey('j', 493.88)\r\n  keyBoard.registerKey('k', 523.25)\r\n  keyBoard.registerKey('q', 150, ESoundType.KICK)\r\n  keyBoard.registerKey('w', 100, ESoundType.SNARE)\r\n  keyPad.addAllKeys()\r\n})\r\n"],"sourceRoot":""}